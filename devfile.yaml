schemaVersion: 2.2.0

metadata:
  name: my-app
  version: 1.0.0

components:
  - name: backend
    image: 
      imageName: backend-image:latest
      dockerfile:
        uri: ./Dockerfile.backend
      memoryLimit: 512Mi

  - name: frontend
    image: 
      imageName: frontend-image:latest
      dockerfile:
        uri: ./src/ui/Dockerfile.frontend
      memoryLimit: 512Mi

commands:
  - id: build-backend
    exec:
      component: backend
      commandLine: "docker build -t backend-image:latest -f Dockerfile.backend ."
      group:
        kind: build
        isDefault: true  

  - id: build-frontend
    exec:
      component: frontend
      commandLine: "docker build -t frontend-image:latest -f src/ui/Dockerfile.frontend ."
      group:
        kind: build
        isDefault: false  
